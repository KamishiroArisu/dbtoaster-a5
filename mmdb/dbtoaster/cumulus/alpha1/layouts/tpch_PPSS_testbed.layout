

############ Put Templates
template 1 PART	P__P_PARTKEY;P__P_MFGR;P__P_TYPE;P__P_SIZE;P__P_CONTAINER;P__P_RETAILPRICE	Map 1[S__S_NATIONKEY]		((P__P_RETAILPRICE)*(Map 2[P__P_PARTKEY,S__S_NATIONKEY]))+((-1)*(Map 3[P__P_PARTKEY,S__S_NATIONKEY]))
template 2 PARTSUPP	PS__PS_PARTKEY;PS__PS_SUPPKEY;PS__PS_AVAILQTY;PS__PS_SUPPLYCOST	Map 1[S__S_NATIONKEY]		(((Map 4[PS__PS_PARTKEY])*(PS__PS_AVAILQTY))*(Map 5[PS__PS_SUPPKEY,S__S_NATIONKEY]))+(((((-1)*(PS__PS_SUPPLYCOST))*(PS__PS_AVAILQTY))*(Map 6[PS__PS_PARTKEY]))*(Map 5[PS__PS_SUPPKEY,S__S_NATIONKEY]))
template 3 SUPPLIER	S__S_SUPPKEY;S__S_NATIONKEY	Map 1[S__S_NATIONKEY]		(Map 7[S__S_SUPPKEY])+((-1)*(Map 8[S__S_SUPPKEY]))
template 4 PARTSUPP	PS__PS_PARTKEY;PS__PS_SUPPKEY;PS__PS_AVAILQTY;PS__PS_SUPPLYCOST	Map 2[PS__PS_PARTKEY,S__S_NATIONKEY]		(PS__PS_AVAILQTY)*(Map 5[PS__PS_SUPPKEY,S__S_NATIONKEY])
template 5 SUPPLIER	S__S_SUPPKEY;S__S_NATIONKEY	Map 2[x_qPART_P__P_PARTKEY,S__S_NATIONKEY]		Map 9[x_qPART_P__P_PARTKEY,S__S_SUPPKEY]
template 6 PARTSUPP	PS__PS_PARTKEY;PS__PS_SUPPKEY;PS__PS_AVAILQTY;PS__PS_SUPPLYCOST	Map 9[PS__PS_PARTKEY,PS__PS_SUPPKEY]		PS__PS_AVAILQTY
template 7 PARTSUPP	PS__PS_PARTKEY;PS__PS_SUPPKEY;PS__PS_AVAILQTY;PS__PS_SUPPLYCOST	Map 3[PS__PS_PARTKEY,S__S_NATIONKEY]		((PS__PS_SUPPLYCOST)*(PS__PS_AVAILQTY))*(Map 5[PS__PS_SUPPKEY,S__S_NATIONKEY])
template 8 SUPPLIER	S__S_SUPPKEY;S__S_NATIONKEY	Map 3[x_qPART_P__P_PARTKEY,S__S_NATIONKEY]		Map 10[x_qPART_P__P_PARTKEY,S__S_SUPPKEY]
template 9 PARTSUPP	PS__PS_PARTKEY;PS__PS_SUPPKEY;PS__PS_AVAILQTY;PS__PS_SUPPLYCOST	Map 10[PS__PS_PARTKEY,PS__PS_SUPPKEY]		(PS__PS_SUPPLYCOST)*(PS__PS_AVAILQTY)
template 10 PART	P__P_PARTKEY;P__P_MFGR;P__P_TYPE;P__P_SIZE;P__P_CONTAINER;P__P_RETAILPRICE	Map 4[P__P_PARTKEY]		P__P_RETAILPRICE
template 11 SUPPLIER	S__S_SUPPKEY;S__S_NATIONKEY	Map 5[S__S_SUPPKEY,S__S_NATIONKEY]		1.0
template 12 PART	P__P_PARTKEY;P__P_MFGR;P__P_TYPE;P__P_SIZE;P__P_CONTAINER;P__P_RETAILPRICE	Map 6[P__P_PARTKEY]		1.0
template 13 PART	P__P_PARTKEY;P__P_MFGR;P__P_TYPE;P__P_SIZE;P__P_CONTAINER;P__P_RETAILPRICE	Map 7[x_qSUPPLIER_S__S_SUPPKEY]		(P__P_RETAILPRICE)*(Map 9[P__P_PARTKEY,x_qSUPPLIER_S__S_SUPPKEY])
template 14 PARTSUPP	PS__PS_PARTKEY;PS__PS_SUPPKEY;PS__PS_AVAILQTY;PS__PS_SUPPLYCOST	Map 7[PS__PS_SUPPKEY]		(Map 4[PS__PS_PARTKEY])*(PS__PS_AVAILQTY)
template 15 PART	P__P_PARTKEY;P__P_MFGR;P__P_TYPE;P__P_SIZE;P__P_CONTAINER;P__P_RETAILPRICE	Map 8[x_qSUPPLIER_S__S_SUPPKEY]		Map 10[P__P_PARTKEY,x_qSUPPLIER_S__S_SUPPKEY]
template 16 PARTSUPP	PS__PS_PARTKEY;PS__PS_SUPPKEY;PS__PS_AVAILQTY;PS__PS_SUPPLYCOST	Map 8[PS__PS_SUPPKEY]		((PS__PS_SUPPLYCOST)*(PS__PS_AVAILQTY))*(Map 6[PS__PS_PARTKEY])


############ Node Definitions
switch slicedbread5
switch_forwarders 0
node Node01
address slicedbread1:52982
partition Map 1[0]
partition Map 2[0,0]
partition Map 3[0,0]
partition Map 4[0]
partition Map 5[0,0]
partition Map 6[0]
partition Map 7[0]
partition Map 8[0]
partition Map 9[0,0]
partition Map 10[0,0]
node Node02
address slicedbread2:52982
partition Map 1[1]
partition Map 2[1,0]
partition Map 3[1,0]
partition Map 4[1]
partition Map 5[1,0]
partition Map 6[1]
partition Map 7[1]
partition Map 8[1]
partition Map 9[1,0]
partition Map 10[1,0]
node Node03
address slicedbread3:52982
partition Map 1[2]
partition Map 2[2,0]
partition Map 3[2,0]
partition Map 4[2]
partition Map 5[2,0]
partition Map 6[2]
partition Map 7[2]
partition Map 8[2]
partition Map 9[2,0]
partition Map 10[2,0]
node Node04
address slicedbread4:52982
partition Map 1[3]
partition Map 2[3,0]
partition Map 3[3,0]
partition Map 4[3]
partition Map 5[3,0]
partition Map 6[3]
partition Map 7[3]
partition Map 8[3]
partition Map 9[3,0]
partition Map 10[3,0]


############ Test Sequence

persist


############ Slicer Debugging Directives
source ~/dbtoaster/tpch/100m
transform PART[2]~/^[^#]*#([0-9]+)/\1/
transform PART[4]~/^[^#]*#([0-9]+)/\1/
transform PART[6]#
project PART(0,2,4,5,6,7)
project SUPPLIER(0,3)
project PARTSUPP(0,1,2,3)
