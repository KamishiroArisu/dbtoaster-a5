
############ Node Definitions
node Alpha
partition Map 1[0::100]
value Map 1[1]v1 = 5.2
value Map 1[2]v2 = 5.1
value Map 1[3]v1 = 9.0
value Map 1[4]v3 = 3
value Map 1[5]v1 = 42.1

node Beta
partition Map 1[100::200]
value Map 1[102]v3 = 9.9999
partition Map 2[0::200]

############ Put Templates
template 1 R	A;B	Map 1[A]		4+B
template 2 R	A;B	Map 1[A]		A+Map 1[B]
template 3 R	A;B	Map 2[C]		A+Map 1[C]

############ Test Sequence
# Note that dumps can be used as synchs, execution pauses until the corresponding server has completed the dump.

# Simple Put
put 5 : Template 1 (2, 5) @ Alpha

# Put of a map value that's been since updated
put 6 : Template 2 (1, 2) @ Alpha

# Fetch test
fetch 0 : Map 1[5] @ Alpha -> Beta

# Put of a remote map value
put 7 : Template 2 (4, 102) @ Alpha
fetch 7 : Map 1[102] @ Beta -> Alpha

# Mass fetch test
fetch 0 : Map 1[-1] @ Alpha -> Beta

# Mass Put
massput 8 : Template 3 (0, 42) @ Beta

# Aaaand... let's see where we stand
sleep 1
dump

